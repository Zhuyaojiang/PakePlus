import{d as x,G as b,H as N,r as f,q as C,j as L,a,o as R,c as U,f as o,w as n,b as E,g,u as v,I as M,J as S,F as z,K as B,y as I,L as T,M as H,N as O,O as $}from"./index-5b619166.js";import{_ as h}from"./_plugin-vue_export-helper-c27b6911.js";const j={class:"login-btn"},q=x({__name:"LoginForm",setup(A){const w=b(),y=N(),u=f(),c=f(!1),s=C({username:"",password:"",ticket:""}),d=e=>{e&&e.validate(async t=>{if(t){c.value=!0;try{const l=await B({...s});if(l.msg=="301"||l.msg=="302"){I.error(l.data);const r="http://25.212.178.59/#/";window.location.href=r}else y.setToken(l.data.token),await T(),localStorage.setItem("username",s.username),w.push(H),O({title:$(),message:"欢迎登录 "+s.username,type:"success",duration:3e3})}finally{c.value=!1}}})},k=e=>{e&&e.resetFields()};return L(()=>{document.onkeydown=e=>{if(e=window.event||e,e.code==="Enter"||e.code==="enter"||e.code==="NumpadEnter"){if(c.value)return;d(u.value)}}}),(e,t)=>{const l=a("user"),r=a("el-icon"),_=a("el-input"),m=a("el-form-item"),F=a("lock"),V=a("el-form"),p=a("el-button");return R(),U(z,null,[o(V,{ref_key:"loginFormRef",ref:u,model:s,size:"large"},{default:n(()=>[o(m,{prop:"username"},{default:n(()=>[o(_,{modelValue:s.username,"onUpdate:modelValue":t[0]||(t[0]=i=>s.username=i),placeholder:"请输入账号",clearable:""},{prefix:n(()=>[o(r,{class:"el-input__icon"},{default:n(()=>[o(l)]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(m,{prop:"password"},{default:n(()=>[o(_,{modelValue:s.password,"onUpdate:modelValue":t[1]||(t[1]=i=>s.password=i),type:"password",placeholder:"请输入密码","show-password":"",clearable:"",autocomplete:"password"},{prefix:n(()=>[o(r,{class:"el-input__icon"},{default:n(()=>[o(F)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),E("div",j,[o(p,{icon:v(M),round:"",size:"large",onClick:t[2]||(t[2]=i=>k(u.value))},{default:n(()=>[g(" 重置 ")]),_:1},8,["icon"]),o(p,{icon:v(S),round:"",size:"large",type:"primary",loading:c.value,onClick:t[3]||(t[3]=i=>d(u.value))},{default:n(()=>[g(" 登录 ")]),_:1},8,["icon","loading"])])],64)}}});const J=h(q,[["__scopeId","data-v-5fc26639"]]);export{J as default};
