import{i as S,L as v}from"./index-e179da42.js";import{d as K,r as ee,a as te,e as O,b as Y,c as oe,f as le,g as ae}from"./fhjc-f327482c.js";import{d as se,r as g,j as ie,a as m,o as D,c as B,b as e,u as G,e as T,g as p,t as h,f as i,w as c,F as P,l as R,E as ne,y as F,p as re,m as ce}from"./index-5b619166.js";import{f as de}from"./file-download-285e3d97.js";import{_ as fe}from"./_plugin-vue_export-helper-c27b6911.js";const d=k=>(re("data-v-5f3fd98a"),k=k(),ce(),k),ue={class:"bj"},_e={class:"title_box"},pe=d(()=>e("div",{class:"title"},"企业负荷监测展示大屏",-1)),he={class:"title_right"},me={class:"affairList"},ye={class:"time"},ve={class:"top_box"},ge=d(()=>e("div",{class:"title"},[e("div",{class:"title_name"},"资源综合概览")],-1)),be={class:"content"},xe={class:"jtkt_box"},we=d(()=>e("div",{class:"jtkt_box_content"},"总静态可调节能力",-1)),Se={class:"jtkt_box_lef"},ke={class:"ktj_box"},Ae=d(()=>e("div",{class:"jtkt_box_content"},"可调节资源总容量",-1)),ze={class:"jtkt_box_lef"},Ee={class:"xydl_box"},Le=d(()=>e("div",{class:"jtkt_box_content"},"响应电量",-1)),Ce={class:"jtkt_box_lef"},De={class:"syqk_box"},Be=d(()=>e("div",{class:"jtkt_box_content"},"收益情况",-1)),Te={class:"jtkt_box_lef"},Fe=d(()=>e("div",{class:"low_right"},[e("div",{class:"title"},[e("div",{class:"title_name"},"可调节资源类型占比")]),e("div",{class:"content"},[e("div",{id:"low_right_pie"})])],-1)),We={class:"centre_top"},Ie={class:"title"},je=d(()=>e("div",{class:"title_name"},"分路电量展示",-1)),Ve={class:"title_select"},Me={class:"content"},Ue=d(()=>e("div",{id:"centre_top_curve"},null,-1)),$e={class:"centre_butt"},qe={class:"title"},Oe=d(()=>e("div",{class:"title_name"},"分路负荷监测曲线",-1)),Ye={class:"title_select"},Ge=d(()=>e("div",{class:"content"},[e("div",{id:"centre_butt_curve"})],-1)),Pe=d(()=>e("div",{class:"right_top"},[e("div",{class:"title"},[e("div",{class:"title_name"},"历史参与需求响应情况")]),e("div",{class:"content"},[e("div",{id:"right_top_pictorialBar"}),e("div",{id:"right_top_pictorialBar1"})])],-1)),Re={class:"right_butt"},He=d(()=>e("div",{class:"title"},[e("div",{class:"title_name"},"拓扑图列表")],-1)),Ne={class:"content"},Ze=se({__name:"index11",setup(k){const W=[{value:"4",label:"生产负荷"},{value:"3",label:"充电桩"},{value:"1",label:"光伏"},{value:"2",label:"储能"}],A=new Date,I=new Date;I.setDate(A.getDate()-7);const z=t=>{const o=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0");return`${o}-${l}-${a}`},u=g({charge:"",gains:"",totalCapacity:"",totalStaticAbility:""}),j=g(""),E=g("4"),L=g("4"),b=g([z(I),z(A)]),x=g([z(A),z(A)]),y=g({});async function H(){await K({}).then(t=>{localStorage.setItem("xqxyList",t.data.length)}),await ee({}).then(t=>{u.value.charge=t.data.charge,u.value.gains=t.data.gains}),await te({}).then(t=>{u.value.totalCapacity=t.data.totalCapacity,u.value.totalStaticAbility=t.data.totalStaticAbility}),await O({type:L.value,startTime:b.value[0],endTime:b.value[1]}).then(t=>{let o=t.data;M(o)}),await Y({type:E.value,startTime:x.value[0],endTime:x.value[1]}).then(t=>{let o=t.data;U(o.qx,o.tj,o.qxtime)}),await oe({}).then(t=>{X(t.data.xydl,t.data.time),J(t.data.syqk,t.data.time)}),await le({}).then(t=>{Q(t.data.data,u.value.totalStaticAbility)})}function N(){ne.confirm("确定要退出登入吗？","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.clear(),sessionStorage.clear(),T.replace("/login"),setTimeout(()=>{location.reload(),F({type:"success",message:"退出成功！"})},240)}).catch(()=>{F({type:"info",message:"已取消！"})})}function Z(){ae({}).then(t=>{de(t,"断路器历史用电量统计表.xlsx"),F({type:"success",message:"导出成功！"})})}function C(){Y({type:E.value,startTime:x.value[0],endTime:x.value[1]}).then(t=>{let o=t.data;U(o.qx,o.tj,o.qxtime)})}function V(){O({type:L.value,startTime:b.value[0],endTime:b.value[1]}).then(t=>{let o=t.data;M(o)})}const Q=async(t,o)=>{let l=document.getElementById("low_right_pie");l.removeAttribute("_echarts_instance_");let a=S(l),n=t,s={color:["#A0CE3A","#31C5C0","#1E9BD1","#0F347B","#585247","#7F6AAD","rgba(250,250,250,0.3)"],backgroundColor:"rgba(255,255,255,0)",tooltip:{show:!0,trigger:"item",formatter:"{b}: {d}%"},title:{text:"总容量",subtext:o+"kWh",textStyle:{color:"#f2f2f2",fontSize:16},subtextStyle:{fontSize:12,color:["#ff9d19"]},x:"45%",y:"39%"},grid:{bottom:150,left:130,right:"1%"},legend:{orient:"vertical",top:"90%",textStyle:{color:"#f2f2f2",fontSize:12},icon:"roundRect",data:n,formatter(f){let _=n.find(w=>w.name==f);return`${_.name} ${_.value} %`}},series:[{radius:["70%","45%"],center:["50%","45%"],type:"pie",label:{normal:{show:!1,formatter:"{c}%",textStyle:{fontSize:19}},emphasis:{show:!1}},labelLine:{normal:{show:!1,length:50,length2:35},emphasis:{show:!1}},data:n},{radius:["45%","50%"],center:["50%","45%"],type:"pie",label:{normal:{show:!1},emphasis:{show:!1}},labelLine:{normal:{show:!1},emphasis:{show:!1}},animation:!1,tooltip:{show:!1},data:[{value:1,itemStyle:{color:"rgba(250,250,250,0.3)"}}]},{name:"外边框",type:"pie",clockWise:!1,hoverAnimation:!1,radius:["70%","70%"],center:["50%","45%"],label:{normal:{show:!1}},data:[{value:9,name:"",itemStyle:{normal:{borderWidth:2,borderColor:"#0b5263"}}}]}]};a.setOption(s),window.addEventListener("resize",()=>{a.resize()})},M=async t=>{let o=document.getElementById("centre_top_curve");o.removeAttribute("_echarts_instance_");let l=S(o),a=t.time,n=t.energy,s={title:{text:"单位：(kWh)",textStyle:{color:"rgba(131, 162, 192, 1)",fontSize:12},top:"5%",left:"2%"},tooltip:{formatter:f=>f.name+"<br/>"+f.value+" kWh"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",data:a,axisTick:{show:!1,alignWithLabel:!0,lineStyle:{color:"#5E87AE"}},axisLine:{lineStyle:{color:"#5E87AE"}}}],yAxis:[{type:"value",axisLine:{show:!1,lineStyle:{color:"#5E87AE"}},axisTick:{show:!1},splitLine:{lineStyle:{type:"dashed",color:"#5E87AE"}}}],dataZoom:[{type:"inside",xAxisIndex:0,orient:"vertical"},{type:"slider",show:!1,xAxisIndex:0}],series:[{type:"bar",barWidth:"40",data:n,itemStyle:{color:new v(0,0,0,1,[{offset:0,color:"#079eeb"},{offset:1,color:"rgba(155, 232, 255,0.5)"}])}}]};l.setOption(s),window.addEventListener("resize",()=>{l.resize()})},U=async(t,o,l)=>{let a=document.getElementById("centre_butt_curve");a.removeAttribute("_echarts_instance_");let n=S(a),s={backgroundColor:"rgba(255,255,255,0)",title:{text:"单位：(kW)",textStyle:{color:"rgba(131, 162, 192, 1)",fontSize:12},top:"5%",left:"2%"},tooltip:{trigger:"axis"},dataZoom:[{type:"inside",xAxisIndex:0,orient:"vertical"},{type:"slider",show:!1,xAxisIndex:0}],legend:{data:["负荷曲线","可调节资源曲线"],icon:"rich",show:!0,itemWidth:20,itemHeight:8,textStyle:{color:"#AFBDD1",fontSize:"12px"},top:8,right:"3%",itemGap:34},grid:{left:"4%",right:"4%",bottom:"10%",top:"18%",containLabel:!0},xAxis:{data:l,type:"category",boundaryGap:!1,axisLine:{symbol:"none",lineStyle:{color:"#50637A"}},axisTick:{show:!1},axisLabel:{color:"#6071A9",fontSize:12,padding:[10,0,0,0]}},yAxis:{type:"value",axisLabel:{color:"#6071A9",fontSize:12,padding:[0,10,0,0]},splitLine:{lineStyle:{color:"#50637A",type:"dashed"}}},series:[{name:"负荷曲线",data:t,type:"line",smooth:!0,color:"#00F7FF",lineStyle:{width:2},areaStyle:{color:new v(0,0,0,1,[{offset:0,color:"rgba(0, 247, 255, .6)"},{offset:.8,color:"rgba(0, 247, 255, .2)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10},symbol:"circle",symbolSize:1},{name:"可调节资源曲线",type:"line",data:o,smooth:!0,color:"#1D87F0",lineStyle:{width:2},areaStyle:{color:new v(0,0,0,1,[{offset:0,color:"rgba(29, 135, 240, 0.6)"},{offset:.8,color:"rgba(29, 135, 240, 0.2)"}],!1),shadowColor:"rgba(0, 0, 0, 0.1)",shadowBlur:10},symbol:"circle",symbolSize:2}]};n.setOption(s),window.addEventListener("resize",()=>{n.resize()})},X=async(t,o)=>{let l=document.getElementById("right_top_pictorialBar");l.removeAttribute("_echarts_instance_");let a=S(l),n={backgroundColor:"rgba(255,255,255,0)",tooltip:{formatter:s=>s.name+"<br/>"+s.value+" kWh"},title:{text:"单位：(kWh)",textStyle:{color:"rgba(131, 162, 192, 1)",fontSize:12},top:"5%",left:"2%"},grid:{left:"9%",top:"20%",right:"1%",bottom:"22%"},legend:{show:!0,icon:"circle",orient:"horizontal",top:"90.5%",right:"center",itemWidth:16.5,itemHeight:6,textStyle:{color:"#FFFFFF",fontSize:14}},xAxis:[{data:o,axisLabel:{textStyle:{color:"#fff",fontSize:12},margin:30},axisLine:{show:!0,lineStyle:{color:"#6071A9"}},axisTick:{show:!1},boundaryGap:!0,splitLine:{show:!1,width:.08,lineStyle:{type:"solid",color:"#03202E"}}}],yAxis:[{splitLine:{show:!0,lineStyle:{color:"#6071A9",type:"dashed"}},axisTick:{show:!1},axisLine:{show:!1,lineStyle:{color:"#E2E8EC"}},axisLabel:{textStyle:{color:"#ffff",fontSize:12}}}],series:[{name:"",type:"pictorialBar",symbolSize:[30,20],symbolOffset:[0,10],z:12,itemStyle:{normal:{color:new v(0,0,0,1,[{offset:0,color:"#02D6EA"},{offset:1,color:"#02D6EA"}],!1)}},data:t},{name:"",type:"bar",barWidth:30,barGap:"0%",itemStyle:{normal:{color:{x:0,y:0,x2:0,y2:1,type:"linear",global:!1,colorStops:[{offset:0,color:"#057DFE"},{offset:1,color:"#02D7EA"}]}}},data:t},{name:"",type:"pictorialBar",symbolSize:[30,20],symbolOffset:[0,-10],z:12,symbolPosition:"end",itemStyle:{normal:{color:new v(0,0,0,1,[{offset:0,color:"#50A7FF"},{offset:1,color:"#02D6EA"}],!1)}},data:t}]};a.setOption(n),window.addEventListener("resize",()=>{a.resize()})},J=async(t,o)=>{let l=document.getElementById("right_top_pictorialBar1");l.removeAttribute("_echarts_instance_");let a=S(l),n={backgroundColor:"rgba(255,255,255,0)",tooltip:{formatter:s=>s.name+"<br/>"+s.value+" 元"},title:{text:"单位：(元)",textStyle:{color:"rgba(131, 162, 192, 1)",fontSize:12},top:"5%",left:"2%"},grid:{left:"9%",top:"20%",right:"1%",bottom:"22%"},legend:{show:!0,icon:"circle",orient:"horizontal",top:"90.5%",right:"center",itemWidth:16.5,itemHeight:6,textStyle:{color:"#FFFFFF",fontSize:14}},xAxis:[{data:o,axisLabel:{textStyle:{color:"#fff",fontSize:12},margin:30},axisLine:{show:!0,lineStyle:{color:"#6071A9"}},axisTick:{show:!1},boundaryGap:!0,splitLine:{show:!1,width:.08,lineStyle:{type:"solid",color:"#03202E"}}}],yAxis:[{splitLine:{show:!0,lineStyle:{color:"#6071A9",type:"dashed"}},axisTick:{show:!1},axisLine:{show:!1,lineStyle:{color:"#E2E8EC"}},axisLabel:{textStyle:{color:"#ffff",fontSize:12}}}],series:[{name:"",type:"pictorialBar",symbolSize:[30,20],symbolOffset:[0,10],z:12,itemStyle:{normal:{color:new v(0,0,0,1,[{offset:0,color:"#1fe4a8"},{offset:1,color:"#14bbbf"}],!1)}},data:t},{name:"",type:"bar",barWidth:30,barGap:"0%",itemStyle:{normal:{color:{x:0,y:0,x2:0,y2:1,type:"linear",global:!1,colorStops:[{offset:0,color:"#1fe4a8"},{offset:1,color:"#14bbbf"}]}}},data:t},{name:"",type:"pictorialBar",symbolSize:[30,20],symbolOffset:[0,-10],z:12,symbolPosition:"end",itemStyle:{normal:{color:new v(0,0,0,1,[{offset:0,color:"#1fe4a8"},{offset:1,color:"#14bbbf"}],!1)}},data:t}]};a.setOption(n),window.addEventListener("resize",()=>{a.resize()})};function $(){let t=new Date,o=t.getFullYear(),l=t.getMonth()+1,a=t.getDate(),n=t.getDay(),s=t.getHours(),f=t.getMinutes(),_=t.getSeconds(),w=["日","一","二","三","四","五","六"];return l<10&&(l="0"+l),a<10&&(a="0"+a),s<10&&(s="0"+s),f<10&&(f="0"+f),_<10&&(_="0"+_),{n:`${o}`,y:l,r:a,x:`${w[n]}`,s:`${s}:${f}:${_}`}}return setInterval(()=>{y.value=$()},1e3),ie(()=>{y.value=$(),H(),setTimeout(()=>{j.value=localStorage.getItem("xqxyList")},300),setInterval(()=>{C()},1e3*60*1)}),(t,o)=>{const l=m("el-col"),a=m("el-row"),n=m("el-date-picker"),s=m("el-option"),f=m("el-select"),_=m("Download"),w=m("el-icon"),q=m("el-tooltip");return D(),B("div",ue,[e("div",_e,[pe,e("div",he,[e("div",me,[e("div",{onClick:o[0]||(o[0]=r=>G(T).push("/loadMonitoring/taskList"))},[p(" 需求响应任务数: "),e("span",null,h(j.value),1)])]),e("div",ye,[e("div",null,[e("span",null,h(y.value.n),1),p(" 年 "),e("span",null,h(y.value.y),1),p(" 月 "),e("span",null,h(y.value.r),1),p(" 日 ")]),e("div",null,[p(" 星期"),e("span",null,h(y.value.x+" "+y.value.s),1)])]),e("div",{class:"quit",onClick:N},"退 出")])]),i(a,null,{default:c(()=>[i(l,{span:8,style:{padding:"10px"}},{default:c(()=>[e("div",ve,[ge,e("div",be,[i(a,{gutter:20,style:{height:"100%"}},{default:c(()=>[i(l,{span:12,style:{height:"50%"}},{default:c(()=>[e("div",xe,[we,e("div",Se,h(u.value.totalCapacity)+"kW",1)])]),_:1}),i(l,{span:12,style:{height:"50%"}},{default:c(()=>[e("div",ke,[Ae,e("div",ze,h(u.value.totalStaticAbility)+"kWh",1)])]),_:1}),i(l,{span:12,style:{height:"50%"}},{default:c(()=>[e("div",Ee,[Le,e("div",Ce,h(u.value.charge)+"kWh",1)])]),_:1}),i(l,{span:12,style:{height:"50%"}},{default:c(()=>[e("div",De,[Be,e("div",Te,h(u.value.gains)+"元",1)])]),_:1})]),_:1})])]),Fe]),_:1}),i(l,{span:9},{default:c(()=>[e("div",We,[e("div",Ie,[je,e("div",Ve,[p(" 时间： "),i(n,{modelValue:b.value,"onUpdate:modelValue":o[1]||(o[1]=r=>b.value=r),style:{width:"220px"},type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间","value-format":"YYYY-MM-DD",onChange:V},null,8,["modelValue"]),p(" 资源类型： "),i(f,{modelValue:L.value,"onUpdate:modelValue":o[2]||(o[2]=r=>L.value=r),placeholder:"请选择",style:{width:"110px"},onChange:V},{default:c(()=>[(D(),B(P,null,R(W,r=>i(s,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),e("div",Me,[i(q,{class:"box-item",effect:"dark",content:"导出",placement:"top"},{default:c(()=>[i(w,{class:"download",onClick:Z},{default:c(()=>[i(_)]),_:1})]),_:1}),Ue])]),e("div",$e,[e("div",qe,[Oe,e("div",Ye,[p(" 时间： "),i(n,{modelValue:x.value,"onUpdate:modelValue":o[3]||(o[3]=r=>x.value=r),style:{width:"220px"},type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",size:"default","value-format":"YYYY-MM-DD",onChange:C},null,8,["modelValue"]),p(" 资源类型： "),i(f,{modelValue:E.value,"onUpdate:modelValue":o[4]||(o[4]=r=>E.value=r),placeholder:"请选择",style:{width:"110px"},onChange:C},{default:c(()=>[(D(),B(P,null,R(W,r=>i(s,{key:r.value,label:r.label,value:r.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),Ge])]),_:1}),i(l,{span:7},{default:c(()=>[Pe,e("div",Re,[He,e("div",Ne,[e("div",{class:"content_value",onClick:o[5]||(o[5]=r=>G(T).push("/loadMonitoring/gplot"))},"园区智能断路器分布")])])]),_:1})]),_:1})])}}});const tt=fe(Ze,[["__scopeId","data-v-5f3fd98a"]]);export{tt as default};
